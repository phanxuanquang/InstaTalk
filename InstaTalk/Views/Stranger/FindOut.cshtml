@model InstaTalk.Models.StrangerModel
@{
    ViewData["Title"] = "Stranger";
}

<div class="min-vh-100 d-flex align-items-center justify-content-center flex-column w-100">
    <div style="max-width:550px;text-align:center;">
        <img class="img-fluid" id="homepage_logo" src="~/asset/image/logo.png" alt="logo" style="margin: 1rem 0rem 1rem 0rem;">
        <form id="stranger_index_form" style="width:95%; display:inline-block; margin-left:auto; margin-right:auto;" action="@Url.Action("Waiting", "Stranger")">
            <div class="m-auto" style="max-width:550px;">
                <select id="select_gender" name="StrangerFilter.FindGener">
                    <option selected>You want to find</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Others">Others</option>
                </select>
            </div>
            <div class="m-auto d-flex" style="max-width:550px;">
                <select id="select_age" name="StrangerFilter.MinAge">
                    <option selected>Whose age is</option>
                    <option value="1">From 15 to under 18</option>
                    <option value="2">From 18 to under 24</option>
                    <option value="3">From 24 to under 30</option>
                    <option value="4">Above 30</option>
                </select>
                <select id="select_country" name="StrangerFilter.FindRegion">
                    <option selected>And come from</option>
                </select>
            </div>
            <a class="custom-btn me-2" style="width: 16rem;" href="#" onclick="submitForm()">
                Let's Find Out
                <span></span>
            </a>
            <input id="tags" type="text" data-role="tagsinput" />
        </form>
    </div>
</div>

@section script {
    <script>
        $.ajax({
            url: "https://gist.githubusercontent.com/ssskip/5a94bfcd2835bf1dea52/raw/3b2e5355eb49336f0c6bc0060c05d927c2d1e004/ISO3166-1.alpha2.json",
            type: "get",
            success: function (data) {
                var countries = JSON.parse(data);
                var select = document.getElementById("select_country");
                Object.keys(countries).forEach(key => {
                    var el = document.createElement("option");
                    el.textContent = countries[key];
                    el.value = key;
                    select.appendChild(el);
                })
            }
        })

        function submitForm() {
            var form = document.getElementById("stranger_index_form");
            form.submit();
        }
    </script>
}